(function(){var f=YAHOO.util.Dom,i=YAHOO.util.Event;var c=Alfresco.util.encodeHTML,e=Alfresco.util.combinePaths,b=Alfresco.util.encodeHTML;Alfresco.dashlet.Notice=function g(j){return Alfresco.dashlet.Notice.superclass.constructor.call(this,"Alfresco.dashlet.Notice",j)};YAHOO.extend(Alfresco.dashlet.Notice,Alfresco.component.Base,{options:{componentId:""},onReady:function a(){},onConfigClick:function d(n){var l=Alfresco.constants.URL_SERVICECONTEXT+"modules/dashlet/config/"+encodeURIComponent(this.options.componentId);i.stopEvent(n);if(!this.configDialog){this.configDialog=new Alfresco.module.SimpleDialog(this.id+"-configDialog").setOptions({width:"50em",templateUrl:Alfresco.constants.URL_SERVICECONTEXT+"modules/notice/config",actionUrl:l,onSuccess:{fn:function k(o){var q=f.get(this.configDialog.id+"-title").value,p=f.get(this.configDialog.id+"-text").value;f.get(this.id+"-title").innerHTML=b(q!=""?q:this.msg("notice.defaultTitle"));f.get(this.id+"-text").innerHTML=p!=""?p:"<p>"+this.msg("notice.defaultText")+"</p>"},scope:this},doSetupFormsValidation:{fn:function j(o){f.get(this.configDialog.id+"-title").value=f.get(this.id+"-title").innerHTML;f.get(this.configDialog.id+"-text").value=f.get(this.id+"-text").innerHTML;if(!this.configDialog.editor){this.configDialog.editor=new Alfresco.util.RichEditor("tinyMCE",this.configDialog.id+"-text",{height:150,width:404,inline_styles:false,convert_fonts_to_spans:false,theme:"advanced",theme_advanced_buttons1:"bold,italic,underline,|,bullist,numlist,|,undo,redo,|,link,unlink,anchor,image,code,removeformat,|,forecolor,backcolor",theme_advanced_toolbar_location:"top",theme_advanced_toolbar_align:"left",theme_advanced_statusbar_location:"bottom",theme_advanced_resizing:true,theme_advanced_buttons2:null,theme_advanced_buttons3:null,theme_advanced_path:false,language:"en",extended_valid_elements:"a[href|target|name],font[face|size|color|style],span[class|align|style],div[class|align|style]"});this.configDialog.editor.render();this.configDialog.editor.subscribe("onKeyUp",this._onTextContentChange,this.configDialog,true);this.configDialog.editor.subscribe("onChange",this._onTextContentChange,this.configDialog,true)}},scope:this},doBeforeFormSubmit:{fn:function m(o){this.configDialog.editor.save()},scope:this}})}else{this.configDialog.setOptions({actionUrl:l})}this.configDialog.show()},_onTextContentChange:function h(k,j,l){this.editor.save()}})})();