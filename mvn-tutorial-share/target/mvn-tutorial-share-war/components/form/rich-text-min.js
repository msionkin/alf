(function(){Alfresco.RichTextControl=function(e,f){var d=(typeof f=="undefined"||f===null)?"Alfresco.RichTextControl":f;return Alfresco.RichTextControl.superclass.constructor.call(this,d,e,["button"])};YAHOO.extend(Alfresco.RichTextControl,Alfresco.component.Base,{options:{currentValue:"",disabled:false,mandatory:false,editorParameters:null},editor:null,onReady:function b(){if(Alfresco.logger.isDebugEnabled()){Alfresco.logger.debug("Rendering rich text control for element '"+this.id+"', value = '"+this.options.currentValue+"'");Alfresco.logger.debug("Editor parameters for element '"+this.id+"': "+YAHOO.lang.dump(this.options.editorParameters))}if(!this.options.disabled){this._renderEditor()}},_renderEditor:function c(){this.editor=new Alfresco.util.RichEditor("tinyMCE",this.id,this.options.editorParameters);this.editor.render();var f=this;this.editor.getEditor().onSetContent.add(function(g,h){f._handleContentChange()});var e=YAHOO.util.Dom.get(this.id.replace(/_prop_cm_content$/,"-form-submit-button"));if(e){function d(){f._handleContentChange()}YAHOO.util.Event.on(e,"click",d)}this.editor.getEditor().onExecCommand.add(function(g,h){f._handleContentChange()})},_handleContentChange:function a(){if(this.editor.isDirty()){this.editor.save();if(this.options.mandatory){YAHOO.Bubbling.fire("mandatoryControlValueUpdated",this)}}}})})();