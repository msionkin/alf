var loadingImage=Alfresco.constants.URL_RESCONTEXT+"components/images/lightbox/loading.gif";var closeButton=Alfresco.constants.URL_RESCONTEXT+"components/images/lightbox/close.gif";function getPageScroll(){var a;if(self.pageYOffset){a=self.pageYOffset}else{if(document.documentElement&&document.documentElement.scrollTop){a=document.documentElement.scrollTop}else{if(document.body){a=document.body.scrollTop}}}arrayPageScroll=new Array("",a);return arrayPageScroll}function getPageSize(){var c,a;if(window.innerHeight&&window.scrollMaxY){c=document.body.scrollWidth;a=window.innerHeight+window.scrollMaxY}else{if(document.body.scrollHeight>document.body.offsetHeight){c=document.body.scrollWidth;a=document.body.scrollHeight}else{c=document.body.offsetWidth;a=document.body.offsetHeight}}var b,d;if(self.innerHeight){b=self.innerWidth;d=self.innerHeight}else{if(document.documentElement&&document.documentElement.clientHeight){b=document.documentElement.clientWidth;d=document.documentElement.clientHeight}else{if(document.body){b=document.body.clientWidth;d=document.body.clientHeight}}}if(a<d){pageHeight=d}else{pageHeight=a}if(c<b){pageWidth=b}else{pageWidth=c}arrayPageSize=new Array(pageWidth,pageHeight,b,d);return arrayPageSize}function pause(b){var a=new Date();var c=a.getTime()+b;while(true){a=new Date();if(a.getTime()>c){return}}}function getKey(a){if(a==null){keycode=event.keyCode}else{keycode=a.which}key=String.fromCharCode(keycode).toLowerCase();if(key=="x"){hideLightbox()}}function listenKey(){document.onkeypress=getKey}function showLightbox(c){var h=document.getElementById("overlay");var b=document.getElementById("lightbox");var e=document.getElementById("lightboxCaption");var i=document.getElementById("lightboxImage");var a=document.getElementById("loadingImage");var g=document.getElementById("lightboxDetails");var f=getPageSize();var d=getPageScroll();if(a){a.style.top=(d[1]+((f[3]-35-a.height)/2)+"px");a.style.left=(((f[0]-20-a.width)/2)+"px");a.style.display="block"}h.style.height=(f[1]+"px");h.style.opacity=0;h.style.display="block";new YAHOO.util.ColorAnim(h,{opacity:{to:1}},0.25).animate();imgPreload=new Image();imgPreload.onload=function(){i.src=c.href||c.src;var l=d[1]+((f[3]-35-imgPreload.height)/2);var j=((f[0]-20-imgPreload.width)/2);b.style.top=(l<0)?"0px":l+"px";b.style.left=(j<0)?"0px":j+"px";b.style.minWidth="128px";g.style.minWidth="128px";g.style.width=imgPreload.width+"px";var k=c.title;if(!k&&c.getAttribute){k=c.getAttribute("title")}if(k){e.style.display="block";e.innerHTML=k}else{e.style.display="none"}if(navigator.appVersion.indexOf("MSIE")!=-1){pause(100)}if(a){a.style.display="none"}b.style.opacity=0;b.style.display="block";new YAHOO.util.ColorAnim(b,{opacity:{to:1}},0.25).animate();f=getPageSize();h.style.height=(f[1]+"px");listenKey();return false};imgPreload.src=c.href||c.src}function hideLightbox(){objOverlay=document.getElementById("overlay");objLightbox=document.getElementById("lightbox");objOverlay.style.display="none";objLightbox.style.display="none";document.onkeypress=""}function initLightbox(){var k=document.getElementsByTagName("body").item(0);var j=document.createElement("div");j.setAttribute("id","overlay");j.onclick=function(){hideLightbox();return false};j.style.display="none";j.style.position="absolute";j.style.top="0";j.style.left="0";j.style.zIndex="90";j.style.width="100%";k.insertBefore(j,k.firstChild);var d=getPageSize();var e=getPageScroll();var f=new Image();f.onload=function(){var m=document.createElement("a");m.setAttribute("href","#");m.onclick=function(){hideLightbox();return false};j.appendChild(m);var l=document.createElement("img");l.src=loadingImage;l.setAttribute("id","loadingImage");l.style.position="absolute";l.style.zIndex="150";m.appendChild(l);f.onload=function(){};return false};f.src=loadingImage;var a=document.createElement("div");a.setAttribute("id","lightbox");a.style.display="none";a.style.position="absolute";a.style.boxShadow="9px 9px 9px #222";a.style.zIndex="100";k.insertBefore(a,j.nextSibling);var b=document.createElement("a");b.setAttribute("href","#");b.onclick=function(){hideLightbox();return false};a.appendChild(b);var g=new Image();g.onload=function(){var l=document.createElement("img");l.src=closeButton;l.setAttribute("id","closeButton");l.style.position="absolute";l.style.zIndex="200";b.appendChild(l);return false};g.src=closeButton;var i=document.createElement("img");i.setAttribute("id","lightboxImage");b.appendChild(i);var h=document.createElement("div");h.setAttribute("id","lightboxDetails");a.appendChild(h);var c=document.createElement("div");c.setAttribute("id","lightboxCaption");c.style.display="none";h.appendChild(c)}function addLoadEvent(a){var b=window.onload;if(typeof window.onload!="function"){window.onload=a}else{window.onload=function(){b();a()}}}addLoadEvent(initLightbox);