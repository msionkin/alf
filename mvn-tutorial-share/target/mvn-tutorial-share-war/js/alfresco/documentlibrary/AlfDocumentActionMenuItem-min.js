define(["dojo/_base/declare","alfresco/menus/AlfFilteringMenuItem","alfresco/documentlibrary/_AlfDocumentListTopicMixin","dojo/_base/lang","dojo/dom-class","dojo/_base/array"],function(c,b,g,f,d,h){return c([b,g],{i18nScope:"Alfresco.DocListToolbar",cssRequirements:[{cssFile:"./css/AlfDocumentActionMenuItem.css"}],postCreate:function e(){this.filterTopic=this.selectedDocumentsChangeTopic;this.inherited(arguments);d.add(this.iconNode.parentNode,"toolbar");d.add(this.iconNode,"alf-document-action-menu-item")},filter:function a(n){this.alfLog("log","Filtering request received: ",n);var l=false,k,m;if(n&&n.userAccess&&n.commonAspects&&n.allAspects){if(this.permission!=""){var p=this.permission.split(",");for(k=0,m=p.length;k<m;k++){if(!n.userAccess[p[k]]){l=true;break}}}if(this.hasAspect!=""){var j=this.hasAspect.split(",");for(k=0,m=j.length;k<m;k++){if(h.indexOf(n.commonAspects,j[k])==-1){l=true;break}}}if(this.notAspect!=""){var o=this.notAspect.split(",");for(k=0,m=o.length;k<m;k++){if(h.indexOf(n.allAspects,o[k])!=-1){l=true;break}}}}if(l){this.hide()}else{this.show()}}})});