define(["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin","dojo/text!./templates/SlideOverlay.html","alfresco/core/Core","dojo/_base/lang","dojo/_base/array","dojo/on","dojo/dom-geometry","dojo/dom-class","dojo/dom-style","dojo/fx","dojo/_base/fx"],function(n,c,k,p,h,r,d,g,m,f,i,j,a){return n([c,k,h],{cssRequirements:[{cssFile:"./css/SlideOverlay.css"}],templateString:p,showTopics:null,hideTopics:null,showEvents:null,hideEvents:null,adjustHeightTopics:null,adjustHeightEvents:null,postCreate:function l(){d.forEach(this.showTopics,function(v,w){this.alfSubscribe(v,r.hitch(this,"showOverlay"))},this);d.forEach(this.hideTopics,function(v,w){this.alfSubscribe(v,r.hitch(this,"hideOverlay"))},this);d.forEach(this.showEvents,function(v){g(this.domNode,v,r.hitch(this,"showOverlay"))},this);d.forEach(this.hideEvents,function(v){g(this.domNode,v,r.hitch(this,"hideOverlay"))},this);d.forEach(this.adjustHeightTopics,function(v,w){this.alfSubscribe(v,r.hitch(this,"adjustHeight"))},this);d.forEach(this.adjustHeightEvents,function(v){g(this.domNode,v,r.hitch(this,"adjustHeight"))},this);if(this.widgets){this.processWidgets(this.widgets)}if(typeof MutationObserver==="function"){var u=this;var s=new MutationObserver(r.hitch(this,"adjustHeight")),t={attributes:true,childList:true,characterData:true,subtree:true};s.observe(this.overlayNode,t);s.observe(this.underlayNode,t)}},processWidget:function e(s,v,t){if(this.filterWidget(v)){var u=null;if(v.align=="overlay"){u=this.createWidgetDomNode(v,this.overlayNode,v.className)}else{u=this.createWidgetDomNode(v,this.underlayNode,v.className)}this.createWidget(v,u,this._registerProcessedWidget,this)}},overlayHidden:true,showOverlay:function q(){f.remove(this.overlayNode,"hide");this.overlayHidden=false},adjustHeight:function o(){var t=m.getMarginBox(this.overlayNode),u=m.getMarginBox(this.underlayNode);var s=(t.h>u.h)?t.h:u.h;a.animateProperty({node:this.domNode,properties:{height:s}}).play()},hideOverlay:function b(){f.add(this.overlayNode,"hide");this.overlayHidden=true}})});