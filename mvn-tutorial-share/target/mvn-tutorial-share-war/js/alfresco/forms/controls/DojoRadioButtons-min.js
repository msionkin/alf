define(["alfresco/forms/controls/BaseFormControl","dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin","dojo/text!./templates/RadioButton.html","dojo/text!./templates/RadioButtons.html","alfresco/core/Core","dijit/form/RadioButton","dojo/_base/array","dojo/dom-construct"],function(k,g,d,l,h,b,c,e,i,f){var j=g([d,l,c],{cssRequirements:[{cssFile:"./css/RadioButton.css"}],templateString:h,_radioButton:null,postCreate:function(){this._radioButton=new e({name:this.name,value:this.value});this._radioButton.placeAt(this._radioButtonNode);this._labelNode.innerHTML=this.encodeHTML(this.message(this.label))}});var a=g([d,l,c],{cssRequirements:[{cssFile:"./css/RadioButtons.css"}],templateString:b,options:null,optionToWidget:null,control:null,currentValue:null,lastValue:null,postCreate:function(){this.optionToWidget={};if(this.options!=null&&this.options instanceof Array){i.forEach(this.options,function(n,m){if(typeof n.label=="string"&&typeof n.value=="string"){this.addOption(n)}else{this.alfLog("log","An option provided for a RadioButton was either missing a value or label",n)}},this)}},addOption:function(m){m.name=this.name;var n=new j(m);n.placeAt(this.containerNode);this.options.push(m);this.optionToWidget[m.value]=n;var p=this;var o=n._radioButton.on("change",function(q){if(q){p.currentValue=this.value;p.control.formControlValueChange(name,p.lastValue,p.currentValue);p.control.validate()}else{p.lastValue=this.value}},true)},removeOption:function(m){if(typeof m.value=="string"){var n=this.optionToWidget[m.value];n.destroy()}},getValue:function(){for(var m in this.optionToWidget){var n=this.optionToWidget[m]._radioButton.get("checked");if(n){return this.optionToWidget[m]._radioButton.getValue()}}}});return g([k],{getWidgetConfig:function(){return{id:this.generateUuid(),name:this.name,value:this.value,options:(this.options!=null)?this.options:[],control:this}},createFormControl:function(m){return new a(m)}})});