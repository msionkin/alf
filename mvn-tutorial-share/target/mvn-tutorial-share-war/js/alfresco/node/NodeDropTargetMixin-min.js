define(["dojo/_base/declare","alfresco/core/Core","dojo/mouse","dojo/on","dojo/_base/lang","dojo/dom-class"],function(e,c,g,h,b,k){return e([c],{targetNode:null,dropTarget:null,dropTargetEnabled:false,addNodeDropTarget:function a(o){this.inherited(arguments);this.targetNode=o;this.mouseEnterHandle=h(this.targetNode,g.enter,b.hitch(this,"onMouseEnter"));this.mouseLeaveHandle=h(this.targetNode,g.leave,b.hitch(this,"onMouseLeave"));this.alfSubscribe("/dnd/move/start",b.hitch(this,"onMoveStarted"));this.alfSubscribe("/dnd/move/stop",b.hitch(this,"onMoveStopped"))},shouldProcessDrop:false,onMouseEnter:function j(o){this.shouldProcessDrop=true&&this.dropTargetEnabled;if(this.shouldProcessDrop){this.addDndHighlight()}},onMouseLeave:function n(o){this.shouldProcessDrop=false;if(!this.shouldProcessDrop||!this.dropTargetEnabled){this.removeDndHighlight()}},onMoveStarted:function d(o){this.dropTargetEnabled=true},onMoveStopped:function i(o){this.dropTargetEnabled=false;if(this.shouldProcessDrop){var q=null;if(o.alfCurrentItem!=null&&b.exists("jsNode.nodeRef.nodeRef",o.alfCurrentItem)){q=b.getObject("jsNode.nodeRef.nodeRef",false,o.alfCurrentItem)}var p=this.getDropTargetNodeRefUri(),r=this.getDropTargetPath();if(q!=null&&(p!=null||r!=null)){o.alfNodeDropClaimed=true;this.alfPublish("ALF_MOVE_DOCUMENTS",{sourceNodeRefs:[q],targetNodeRefUri:p,targetPath:r})}}},getDropTargetNodeRefUri:function f(){var o=null;if(b.exists("jsNode.nodeRef.uri",this.currentItem)){o=b.getObject("jsNode.nodeRef.uri",false,this.currentItem)}return o},getDropTargetPath:function l(){var o=null;if(this.path!=null){o=this.path}return o},addDndHighlight:function m(){k.add(this.domNode,"dndHighlight")},removeDndHighlight:function m(){k.remove(this.domNode,"dndHighlight")},})});