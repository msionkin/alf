define(["dojo/_base/declare","alfresco/core/Core","dojo/json","dojo/request/xhr","dojo/_base/lang","dojo/query","dojo/NodeList-manipulate"],function(a,b,f,e,d,c){return a([b],{processXhrDependencies:function(h){var j=this;try{var g=f.parse(h,true);e(appContext+"/service/surf/dojo/xhr/dependencies",{handleAs:"json",query:{widgets:h}}).then(function(m){for(var n in m.cssMap){c("head").append('<link rel="stylesheet" type="text/css" href="'+appContext+m.cssMap[n]+'" media="'+n+'">')}for(var l in m.i18nMap){if(typeof window[m.i18nGlobalObject].messages.scope[l]=="undefined"){window[m.i18nGlobalObject].messages.scope[l]=m.i18nMap[l]}else{d.mixin(window[m.i18nGlobalObject].messages.scope[l],m.i18nMap[l])}}var k=[m.javaScript];require(k,function(){j.processWidgets(g.widgets,j.previewNode)})},function(k){j.alfLog("error","An error occurred requesting the XHR dependencies")})}catch(i){this.alfLog("log","An error occurred parsing the JSON",i)}}})});