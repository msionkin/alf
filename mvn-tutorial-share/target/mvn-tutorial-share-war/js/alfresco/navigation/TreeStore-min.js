define(["dojo/_base/declare","dojo/store/JsonRest","alfresco/core/Core","alfresco/core/CoreXhr","dojo/Deferred","dojo/_base/lang","dojo/_base/array"],function(f,e,c,d,j,b,h){return f([e,c,d],{getChildren:function i(o,n){var l=new j();var m={url:this.target+o.path,query:this.targetQueryObject,method:"GET",deferred:l,parent:o,successCallback:this.onChildRequestSuccess,failureCallback:this.onChildRequestFailure,callbackScope:this};this.serviceXhr(m);return l},onChildRequestSuccess:function k(m,l){h.forEach(m.items,b.hitch(this,"updateChild",l.parent));l.deferred.resolve(m.items)},updateChild:function a(m,n,l){n.id=n.nodeRef;n.value=n.name;n.path=m.path+n.name+"/"},onChildRequestFailure:function g(m,l){this.alfLog("error","Could not load children");l.deferred.resolve([])}})});