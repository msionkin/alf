define(["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin","dojo/text!./templates/Toggle.html","alfresco/core/Core","alfresco/renderers/_ItemLinkMixin","dijit/_OnDijitClickMixin","dojo/_base/lang","dojo/dom-class"],function(t,b,o,u,k,j,l,w,e){return t([b,o,k,j,l],{i18nRequirements:[{i18nFile:"./i18n/Toggle.properties"}],cssRequirements:[{cssFile:"./css/Toggle.css"}],templateString:u,onLabel:"toggle.on.label",offLabel:"toggle.off.label",onTooltip:"toggle.on.tooltip",offTooltip:"toggle.off.tooltip",toggleClass:"",toggleOnTopic:null,toggleOnSuccessTopic:null,toggleOnFailureTopic:null,toggleOffTopic:null,toggleOffSuccessTopic:null,toggleOffFailureTopic:null,postMixInProperties:function v(){this.onLabel=this.message(this.onLabel);this.offLabel=this.message(this.offLabel);this.onTooltip=this.message(this.onTooltip);this.offTooltip=this.message(this.offTooltip);if(this.toggleOnTopic!=null){if(this.toggleOnSuccessTopic==null){this.toggleOnSuccessTopic=this.toggleOnTopic+"_SUCCESS"}if(this.toggleOnFailureTopic==null){this.toggleOnFailureTopic=this.toggleOnTopic+"_FAILURE"}}if(this.toggleOffTopic!=null){if(this.toggleOffSuccessTopic==null){this.toggleOffSuccessTopic=this.toggleOffTopic+"_SUCCESS"}if(this.toggleOffFailureTopic==null){this.toggleOffFailureTopic=this.toggleOffTopic+"_FAILURE"}}},isToggleOn:null,getInitialState:function f(){return false},postCreate:function r(){this.isToggleOn=this.getInitialState();if(this.isToggleOn){e.remove(this.onNode,"hidden")}else{e.remove(this.offNode,"hidden")}if(this.toggleOnTopic!=null){this.alfSubscribe(this.toggleOnSuccessTopic,w.hitch(this,"checkApplicable",this.onToggleOnSuccess));this.alfSubscribe(this.toggleOnFailureTopic,w.hitch(this,"checkApplicable",this.onToggleOnFailure))}if(this.toggleOffTopic!=null){this.alfSubscribe(this.toggleOffSuccessTopic,w.hitch(this,"checkApplicable",this.onToggleOffSuccess));this.alfSubscribe(this.toggleOffFailureTopic,w.hitch(this,"checkApplicable",this.onToggleOffFailure))}},onClick:function m(){if(this.isToggleOn){this.renderToggledOff();this.toggledOff()}else{this.renderToggledOn();this.toggledOn()}},renderToggledOn:function n(){e.add(this.warningNode,"hidden");e.add(this.offNode,"hidden");e.remove(this.processingNode,"hidden")},renderToggledOff:function i(){e.add(this.warningNode,"hidden");e.add(this.onNode,"hidden");e.remove(this.processingNode,"hidden")},toggledOn:function c(){this.alfPublish(this.toggleOnTopic,{node:this.currentItem})},toggledOff:function a(){this.alfPublish(this.toggleOffTopic,{node:this.currentItem})},checkApplicable:function q(x,y){if(this.relatesToMe(y)){x.call(this,y)}},relatesToMe:function p(y){var z=false;try{z=(y.requestConfig.data.node.nodeRef==this.currentItem.nodeRef)}catch(x){this.alfLog("error","Unexpected data structures",x,y,this)}return z},onToggleOnSuccess:function d(x){this.isToggleOn=true;e.add(this.processingNode,"hidden");e.remove(this.onNode,"hidden")},onToggleOnFailure:function g(x){this.isToggleOn=false;e.add(this.processingNode,"hidden");e.remove(this.offNode,"hidden");e.remove(this.warningNode,"hidden")},onToggleOffSuccess:function s(x){this.isToggleOn=false;e.add(this.processingNode,"hidden");e.remove(this.offNode,"hidden")},onToggleOffFailure:function h(x){this.isToggleOn=true;e.add(this.processingNode,"hidden");e.remove(this.onNode,"hidden");e.remove(this.warningNode,"hidden")}})});