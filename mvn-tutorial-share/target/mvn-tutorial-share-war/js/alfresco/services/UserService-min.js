define(["dojo/_base/declare","alfresco/core/Core","alfresco/core/CoreXhr","alfresco/core/NotificationUtils","dojo/request/xhr","dojo/json","dojo/_base/lang"],function(d,b,g,c,j,i,a){return d([b,g,c],{i18nRequirements:[{i18nFile:"./i18n/UserService.properties"}],constructor:function k(l){a.mixin(this,l);this.alfSubscribe("ALF_UPDATE_USER_STATUS",a.hitch(this,"updateUserStatus"))},updateUserStatus:function e(m){var n=this,l=Alfresco.constants.URL_SERVICECONTEXT+"components/profile/userstatus";this.serviceXhr({url:l,data:m,method:"POST",successCallback:this.userStatusUpdateSuccess,failureCallback:this.userStatusUpdateFailure,callbackScope:this})},userStatusUpdateSuccess:function f(m,l){this.alfLog("log","User Status Update Success",m);if(typeof m=="string"){var m=i.parse(this.cleanupJSONResponse(m))}this.displayMessage(this.message("message.status.success"));this.alfPublish("ALF_USER_STATUS_UPDATED",{userStatus:l.data.status,userStatusTime:m.userStatusTime.iso8601})},userStatusUpdateFailure:function h(m,l){this.alfLog("log","User Status Update Failure",m);if(typeof m=="string"){var m=i.parse(this.cleanupJSONResponse(m))}this.displayMessage(this.message("message.status.failure"));this.alfPublish("ALF_USER_STATUS_UPDATE_FAILURE",m)}})});